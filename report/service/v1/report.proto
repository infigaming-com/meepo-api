syntax = "proto3";

package api.report.service.v1;

import "google/api/annotations.proto";
import "backoffice/service/v1/backoffice_report.proto";

option go_package = "github.com/infigaming-com/meepo-api/report/service/v1;v1";
option java_multiple_files = true;
option java_package = "api.report.service.v1";

// ReportService provides analytics and reporting functionality via ClickHouse.
// This service is the ONLY service allowed to query ClickHouse directly.
service ReportService {
  // Summary reports
  rpc GetSummary(api.backoffice.service.v1.GetSummaryRequest) returns (api.backoffice.service.v1.GetSummaryResponse) {
    option (google.api.http) = {
      post: "/v1/report/summary/get"
      body: "*"
    };
  }

  rpc ListSummaries(api.backoffice.service.v1.ListSummariesRequest) returns (api.backoffice.service.v1.ListSummariesResponse) {
    option (google.api.http) = {
      post: "/v1/report/summary/list"
      body: "*"
    };
  }

  // Game data reports
  rpc GetGameDataSummary(api.backoffice.service.v1.GetGameSummaryRequest) returns (api.backoffice.service.v1.GetGameSummaryResponse) {
    option (google.api.http) = {
      post: "/v1/report/game-data/get"
      body: "*"
    };
  }

  rpc ListGameData(api.backoffice.service.v1.ListGameDataRequest) returns (api.backoffice.service.v1.ListGameDataResponse) {
    option (google.api.http) = {
      post: "/v1/report/game-data/list"
      body: "*"
    };
  }

  // Player game data reports
  rpc GetPlayerGameDataSummary(api.backoffice.service.v1.GetPlayerGameSummaryRequest) returns (api.backoffice.service.v1.GetPlayerGameSummaryResponse) {
    option (google.api.http) = {
      post: "/v1/report/player-game-data/get"
      body: "*"
    };
  }

  rpc ListPlayerGameData(api.backoffice.service.v1.ListPlayerGameDataRequest) returns (api.backoffice.service.v1.ListPlayerGameDataResponse) {
    option (google.api.http) = {
      post: "/v1/report/player-game-data/list"
      body: "*"
    };
  }

  // Retention reports
  rpc ListRegisterRetention(api.backoffice.service.v1.ListRegisterRetentionRequest) returns (api.backoffice.service.v1.ListRegisterRetentionResponse) {
    option (google.api.http) = {
      post: "/v1/report/register-retention/list"
      body: "*"
    };
  }

  // Deposit reports
  rpc GetDepositSummaries(api.backoffice.service.v1.GetDepositSummariesRequest) returns (api.backoffice.service.v1.GetDepositSummariesResponse) {
    option (google.api.http) = {
      post: "/v1/report/deposit-summaries/get"
      body: "*"
    };
  }

  rpc ListDepositDetails(api.backoffice.service.v1.ListDepositDetailsRequest) returns (api.backoffice.service.v1.ListDepositDetailsResponse) {
    option (google.api.http) = {
      post: "/v1/report/deposit-details/list"
      body: "*"
    };
  }

  rpc ListDepositVtgDetails(api.backoffice.service.v1.ListDepositVtgDetailsRequest) returns (api.backoffice.service.v1.ListDepositVtgDetailsResponse) {
    option (google.api.http) = {
      post: "/v1/report/deposit-vtg-details/list"
      body: "*"
    };
  }

  // Withdrawal reports
  rpc GetWithdrawSummaries(api.backoffice.service.v1.GetWithdrawSummariesRequest) returns (api.backoffice.service.v1.GetWithdrawSummariesResponse) {
    option (google.api.http) = {
      post: "/v1/report/withdraw-summaries/get"
      body: "*"
    };
  }

  rpc ListWithdrawDetails(api.backoffice.service.v1.ListWithdrawDetailsRequest) returns (api.backoffice.service.v1.ListWithdrawDetailsResponse) {
    option (google.api.http) = {
      post: "/v1/report/withdraw-details/list"
      body: "*"
    };
  }

  rpc ListWithdrawVtgDetails(api.backoffice.service.v1.ListWithdrawVtgDetailsRequest) returns (api.backoffice.service.v1.ListWithdrawVtgDetailsResponse) {
    option (google.api.http) = {
      post: "/v1/report/withdraw-vtg-details/list"
      body: "*"
    };
  }

  // Sport events (may need different implementation)
  rpc ListSportEvents(api.backoffice.service.v1.ListSportEventsRequest) returns (api.backoffice.service.v1.ListSportEventsResponse) {
    option (google.api.http) = {
      post: "/v1/report/sport-events/list"
      body: "*"
    };
  }

  // Customer record detail
  rpc CustomerRecordReportDetail(api.backoffice.service.v1.CustomerRecordReportDetailRequest) returns (api.backoffice.service.v1.CustomerRecordReportDetailResponse) {
    option (google.api.http) = {
      post: "/v1/report/customer-record/get"
      body: "*"
    };
  }
}
