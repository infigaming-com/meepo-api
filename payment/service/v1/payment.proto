syntax = "proto3";

import "google/api/annotations.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

package payment.service.v1;

option go_package = "github.com/infigaming-com/meepo-api/payment/service/v1;v1";
option java_multiple_files = true;
option java_package = "api.payment.service.v1";

// Request to get payment method list
message GetPaymentMethodListRequest {
}

// Details of a single payment method
message PaymentMethodInfo {
  string id = 1;
  string currency = 2;
  string country = 3;
  string payment_method = 4;
  map<string, google.protobuf.Value> key_schema = 5; // Stores schema for required fields of the payment method
}

// Response for payment method list
message GetPaymentMethodListResponse {
  string msg = 1;
  int32 code = 2;
  repeated PaymentMethodInfo data = 3;
}

// Request to create a payment channel
message CreatePaymentChannelRequest {
  string merchant_id = 1;
  string payment_method_id = 2;
  map<string, google.protobuf.Value> key = 3; // Stores configuration fields for the payment channel
}

// Response for channel creation
message CreatePaymentChannelResponse {
  string msg = 1;
  int32 code = 2;
  ChannelData data = 3;
}

// Channel data structure
message ChannelData {
  string channel_id = 1;
}

// Request to get payment channel list
message GetPaymentChannelListRequest {
  string merchant_id = 1;
}

// Payment channel information
message PaymentChannelInfo {
  string channel_id = 1;
  string merchant_id = 2;
  string payment_method_id = 3;
  string payment_method = 4;
  string currency = 5;
  string country = 6;
  int32 status = 7;
  google.protobuf.Timestamp created_at = 8;
  google.protobuf.Timestamp updated_at = 9;
}

// Response for payment channel list
message GetPaymentChannelListResponse {
  string msg = 1;
  int32 code = 2;
  repeated PaymentChannelInfo data = 3;
}

service Payment {
  // Get list of payment methods
  rpc GetPaymentMethodList(GetPaymentMethodListRequest) returns (GetPaymentMethodListResponse) {
    option (google.api.http) = {
      post: "/api/payment/method/list"
      body: "*"
    };
  }

  // Create payment channel
  rpc CreatePaymentChannel(CreatePaymentChannelRequest) returns (CreatePaymentChannelResponse) {
    option (google.api.http) = {
      post: "/api/payment/channel/create"
      body: "*"
    };
  }

  // Get list of payment channels
  rpc GetPaymentChannelList(GetPaymentChannelListRequest) returns (GetPaymentChannelListResponse) {
    option (google.api.http) = {
      post: "/api/payment/channel/list"
      body: "*"
    };
  }
}