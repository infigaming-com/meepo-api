syntax = "proto3";

package api.infra.service.v1;

option go_package = "github.com/infigaming-com/meepo-api/infra/service/v1;v1";
option java_multiple_files = true;
option java_package = "api.infra.service.v1";

service ApexDomain {
    rpc AddApexDomain(AddApexDomainRequest) returns (AddApexDomainResponse) {}
    rpc DeleteApexDomain(DeleteApexDomainRequest) returns (DeleteApexDomainResponse) {}
    rpc GetApexDomains(GetApexDomainsRequest) returns (GetApexDomainsResponse) {}
    rpc RefreshApexDomain(RefreshApexDomainRequest) returns (RefreshApexDomainResponse) {}
}

message ApexDomainInfo {
    string id = 1;
    string apex_domain = 2;
    string www_domain = 3;
    string domain = 4;
    string status = 5;
    string error_reason = 6;
    string nginx_ip = 7;
    int64 cert_expires_at = 8;
    int64 created_at = 9;
    int64 updated_at = 10;
}

message AddApexDomainRequest {
    string apex_domain = 1;
    string domain = 2;
}

message AddApexDomainResponse {
    ApexDomainInfo apex_domain = 1;
}

message DeleteApexDomainRequest {
    string domain = 1;
    string id = 2;
}

message DeleteApexDomainResponse {
}

message GetApexDomainsRequest {
    message Domain {
        string domain = 1;
        string id = 2;
    }
    repeated Domain domains = 1;
}

message GetApexDomainsResponse {
    repeated ApexDomainInfo apex_domains = 1;
}

message RefreshApexDomainRequest {
    string domain = 1;
    string id = 2;
}

message RefreshApexDomainResponse {
    ApexDomainInfo apex_domain = 1;
}
